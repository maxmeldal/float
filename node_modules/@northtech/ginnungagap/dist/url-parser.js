/**
 * Just use `new URL(s, document?.baseURI)` for the equivalent functionality in modern browsers.
 */
export function parseUrl(s) {
    if (URL) {
        return document ? new URL(s, documentBase()) : new URL(s);
    }
    else {
        const a = document.createElement('a');
        a.href = s;
        return a;
    }
}
/**
 * Just use `document?.baseURI ?? ''` for the equivalent functionality in modern browsers.
 */
export function documentBase() {
    var _a, _b, _c, _d;
    if (document.baseURI) {
        return document.baseURI;
    }
    const baseTag = document.getElementsByTagName('base');
    return (_d = (baseTag.length && ((_a = baseTag.item(0)) === null || _a === void 0 ? void 0 : _a.href)
        ? (_b = baseTag.item(0)) === null || _b === void 0 ? void 0 : _b.href
        : (_c = document.location) === null || _c === void 0 ? void 0 : _c.href)) !== null && _d !== void 0 ? _d : '';
}
export function urlWithId(url, id) {
    if (url == undefined) {
        return undefined;
    }
    if (id == undefined) {
        return url;
    }
    else {
        return (url.endsWith('/') ? url : url + '/')
            + ((typeof id === 'number') ? id.toString(10) : encodeURIComponent(id));
    }
}
export function ensureTrailingSlash(url) {
    if (url == undefined) {
        return undefined;
    }
    if (url.length == 0) {
        return './';
    }
    if (url.endsWith('/')) {
        return url;
    }
    return url + '/';
}
